(function(b){
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
var a;(function(c){if(typeof module!=="undefined"&&module.exports){module.exports=c}else{if(typeof define==="function"){define(c)}else{a=c}}}((function(){var w={};w.name="mustache.js";w.version="0.7.0";w.tags=["{{","}}"];w.Scanner=v;w.Context=t;w.Writer=r;var f=/\s*/;var n=/\s+/;var l=/\S/;var j=/\s*=/;var p=/\s*\}/;var u=/#|\^|\/|>|\{|&|=|!/;function q(z,y){return RegExp.prototype.test.call(z,y)}function i(y){return !q(l,y)}var m=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"};function h(y){return y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function o(y){return String(y).replace(/[&<>"'\/]/g,function(z){return e[z]})}w.escape=o;function v(y){this.string=y;this.tail=y;this.pos=0}v.prototype.eos=function(){return this.tail===""};v.prototype.scan=function(z){var y=this.tail.match(z);if(y&&y.index===0){this.tail=this.tail.substring(y[0].length);this.pos+=y[0].length;return y[0]}return""};v.prototype.scanUntil=function(z){var y,A=this.tail.search(z);switch(A){case -1:y=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,A);this.tail=this.tail.substring(A);this.pos+=A}return y};function t(y,z){this.view=y;this.parent=z;this.clearCache()}t.make=function(y){return(y instanceof t)?y:new t(y)};t.prototype.clearCache=function(){this._cache={}};t.prototype.push=function(y){return new t(y,this)};t.prototype.lookup=function(y){var B=this._cache[y];if(!B){if(y==="."){B=this.view}else{var A=this;while(A){if(y.indexOf(".")>0){var C=y.split("."),z=0;B=A.view;while(B&&z<C.length){B=B[C[z++]]}}else{B=A.view[y]}if(B!=null){break}A=A.parent}}this._cache[y]=B}if(typeof B==="function"){B=B.call(this.view)}return B};function r(){this.clearCache()}r.prototype.clearCache=function(){this._cache={};this._partialCache={}};r.prototype.compile=function(A,y){var z=this._cache[A];if(!z){var B=w.parse(A,y);z=this._cache[A]=this.compileTokens(B,A)}return z};r.prototype.compilePartial=function(z,B,y){var A=this.compile(B,y);this._partialCache[z]=A;return A};r.prototype.compileTokens=function(B,A){var z=g(B);var y=this;return function(C,E){if(E){if(typeof E==="function"){y._loadPartial=E}else{for(var D in E){y.compilePartial(D,E[D])}}}return z(y,t.make(C),A)}};r.prototype.render=function(A,y,z){return this.compile(A)(y,z)};r.prototype._section=function(y,z,G,F){var E=z.lookup(y);switch(typeof E){case"object":if(m(E)){var A="";for(var B=0,D=E.length;B<D;++B){A+=F(this,z.push(E[B]))}return A}return E?F(this,z.push(E)):"";case"function":var H=this;var C=function(J){return H.render(J,z)};var I=E.call(z.view,G,C);return I!=null?I:"";default:if(E){return F(this,z)}}return""};r.prototype._inverted=function(y,z,B){var A=z.lookup(y);if(!A||(m(A)&&A.length===0)){return B(this,z)}return""};r.prototype._partial=function(y,z){if(!(y in this._partialCache)&&this._loadPartial){this.compilePartial(y,this._loadPartial(y))}var A=this._partialCache[y];return A?A(z):""};r.prototype._name=function(y,z){var A=z.lookup(y);if(typeof A==="function"){A=A.call(z.view)}return(A==null)?"":String(A)};r.prototype._escaped=function(y,z){return w.escape(this._name(y,z))};function k(z){var B=z[3];var y=B;var A;while((A=z[4])&&A.length){z=A[A.length-1];y=z[3]}return[B,y]}function g(A){var y={};function z(B,E,D){if(!y[B]){var C=g(E);y[B]=function(G,F){return C(G,F,D)}}return y[B]}return function(H,F,G){var C="";var E,I;for(var D=0,B=A.length;D<B;++D){E=A[D];switch(E[0]){case"#":I=G.slice.apply(G,k(E));C+=H._section(E[1],F,I,z(D,E[4],G));break;case"^":C+=H._inverted(E[1],F,z(D,E[4],G));break;case">":C+=H._partial(E[1],F);break;case"&":C+=H._name(E[1],F);break;case"name":C+=H._escaped(E[1],F);break;case"text":C+=E[1];break}}return C}}function x(D){var y=[];var C=y;var E=[];var A,B;for(var z=0;z<D.length;++z){A=D[z];switch(A[0]){case"#":case"^":A[4]=[];E.push(A);C.push(A);C=A[4];break;case"/":if(E.length===0){throw new Error("Unopened section: "+A[1])}B=E.pop();if(B[1]!==A[1]){throw new Error("Unclosed section: "+B[1])}if(E.length>0){C=E[E.length-1][4]}else{C=y}break;default:C.push(A)}}B=E.pop();if(B){throw new Error("Unclosed section: "+B[1])}return y}function c(C){var B,y,z=[];for(var A=0;A<C.length;++A){B=C[A];if(y&&y[0]==="text"&&B[0]==="text"){y[1]+=B[1];y[3]=B[3]}else{y=B;z.push(B)}}return z}function s(y){if(y.length!==2){throw new Error("Invalid tags: "+y.join(" "))}return[new RegExp(h(y[0])+"\\s*"),new RegExp("\\s*"+h(y[1]))]}w.parse=function(K,M){M=M||w.tags;var L=s(M);var B=new v(K);var I=[],G=[],E=false,N=false;function z(){if(E&&!N){while(G.length){I.splice(G.pop(),1)}}else{G=[]}E=false;N=false}var y,H,J,C;while(!B.eos()){y=B.pos;J=B.scanUntil(L[0]);if(J){for(var D=0,F=J.length;D<F;++D){C=J.charAt(D);if(i(C)){G.push(I.length)}else{N=true}I.push(["text",C,y,y+1]);y+=1;if(C==="\n"){z()}}}y=B.pos;if(!B.scan(L[0])){break}E=true;H=B.scan(u)||"name";B.scan(f);if(H==="="){J=B.scanUntil(j);B.scan(j);B.scanUntil(L[1])}else{if(H==="{"){var A=new RegExp("\\s*"+h("}"+M[1]));J=B.scanUntil(A);B.scan(p);B.scanUntil(L[1]);H="&"}else{J=B.scanUntil(L[1])}}if(!B.scan(L[1])){throw new Error("Unclosed tag at "+B.pos)}I.push([H,J,y,B.pos]);if(H==="name"||H==="{"||H==="&"){N=true}if(H==="="){M=J.split(n);L=s(M)}}I=c(I);return x(I)};var d=new r();w.clearCache=function(){return d.clearCache()};w.compile=function(z,y){return d.compile(z,y)};w.compilePartial=function(z,A,y){return d.compilePartial(z,A,y)};w.compileTokens=function(z,y){return d.compileTokens(z,y)};w.render=function(A,y,z){return d.render(A,y,z)};w.to_html=function(B,z,A,C){var y=w.render(B,z,A);if(typeof C==="function"){C(y)}else{return y}};return w}())));b.mustache=function(e,c,d){return a.render(e,c,d)};b.fn.mustache=function(c,d){return b(this).map(function(f,h){var g=b(h).html().trim();var e=b.mustache(g,c,d);return b(e).get()})}})(jQuery);